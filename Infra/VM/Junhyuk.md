# VM
### 개요

- 가상 머신(VM)은 하드웨어의 자원 내에서 만들어진 자체 CPU, 메모리, 네트워크 인터페이스, 스토리지가 있는 격리된 시스템으로 작동하는 컴퓨팅 환경
- 하이퍼바이저라고 불리는 소프트웨어가 필수 컴퓨팅 리소스를 격리하고 VM의 생성과 관리를 지원합니다.
- VM을 실행하는 물리 서버를 호스트 머신, 호스트 컴퓨터, 호스트 운영 체제 , 간단히 호스트라고 명명
- 해당 리소스를 사용하는 여러 VM을 게스트 머신, 게스트 컴퓨터, 게스트 운영 체제 또는 간단히 게스트라고 명명.
- 하이퍼바이저는 CPU, 메모리, 스토리지 등의 컴퓨팅 리소스를 처리하는 리소스 풀로, 기존 게스트 간 또는 새로운 가상 머신에 쉽게 재배치할 수 있다.
- VM을 사용하면 macOS 또는 Windows 시스템에 Linux를 실행하는 것 처럼 단일 컴퓨터에서 여러 운영 체제를 동시에 실행할 수 있다.

### 가상화란?

가상화는 하드웨어의 자원을 사용하는 기술을 뜻한다. 

가상화를 사용하면 물리 머신의 기능을 여러 사용자 또는 환경에 배포해 최대한 활용할 수 있다.

**가상화 유형**

- **데이터 가상화**: 데이터 소스를 통합하여 단일한 방식으로 신속히 공급
- **데스크톱 가상화**: 시뮬레이션된 여러 데스크톱 환경을 중앙 관리자를 통해 배포하고 제어
- **서버 가상화**: 관리자가 특정 기능을 제공하는 구성으로 서버를 분할
- **운영 체제 가상화**: 단일 컴퓨터에서 여러 운영 체제를 실행할 수 있다.
- **네트워크 기능 가상화**: 디렉터리 서비스, 파일 공유, IP 구성과 같은 네트워크 기능을 분리하여 여러 환경에 배포

### 하이퍼바이저의 작동 방식

VM은 단일 데이터 파일에서 정의될 수 있다. 

파일처럼 컴퓨터 간 이동이 가능하며 어느 컴퓨터에서 열든 동일하게 작동한다. 

하이퍼바이저는 하드웨어를 관리하며 물리적 리소스를 가상 환경과 분리한다. 

리소스는 필요에 따라 물리 환경에서 VM으로 파티셔닝된다. 

예를 들어 하이퍼바이저가 스케줄을 관리하는 동안에도 물리적 하드웨어는 여전히 실행되므로 CPU는 VM의 요청에 따라 CPU 명령을 실행

VM이 실행 중이고 사용자나 프로그램이 물리 환경에서 추가 자원을 요구하는 명령을 내리면, 하이퍼바이저가 물리 시스템의 자원에 대해 해당 요청을 예약한다. 따라서 VM의 운영 체제와 애플리케이션이 물리적 리소스의 공유 풀에 액세스할 수 있다.

Linux 환경에서 기본 제공되는 하이퍼바이저는 커널기반 가상머신 (KVM) 이라고 부른다. 

다른 옵션으로는 오픈소스인 Xen과 Microsoft Hyper-V 등이 있다.

### 가상화에 사용할 수 있는 하이퍼바이저의 유형

### 유형 1

유형 1에 해당하는 하이퍼바이저는 베어 메탈 기반. VM 리소스는 하이퍼바이저가 하드웨어에 직접 예약한다. KVM은 유형 1 하이퍼바이저.

### 유형 2

유형 2에 해당하는 하이퍼바이저는 호스팅 된다. VM 리소스는 호스트 운영 체제에 대해 예약된 다음 하드웨어에 대해 실행. VMware Workstation과 Oracle VirtualBox는 유형 2 하이퍼바이저

### VM의 장점

- 가상화를 통해 다양한 운영 체제가 동시에 실행되며 가상화된 동일한 하드웨어 리소스를 공유할 수 있다.
- 반대로 가상화가 없으면 하드웨어에서 하나의 운영 체제만 실행할 수 있다.
- VM을 사용하는 주요 이유는 서버 통합 때문이다.
- 대부분의 운영 체제와 애플리케이션 배포는 베어 메탈에 배포되는 경우 가용 물리적 리소스를 조금 사용하지만, 가상화를 통해 물리 서버마다 수많은 가상 서버를 배치하여 하드웨어 활용률을 높일 수 있다.
- 이를 통해 하드웨어의 물리적 리소스를 추가로 구매할 필요가 없어지며, 데이터센터에 필요한 전력, 공간 등의 관리 비용도 절감된다.
- VM은 시스템의 나머지 부분으로부터 격리된 환경을 제공하므로 VM 내에서 어떤 대상이 실행되든 호스트 하드웨어에서 실행되는 다른 대상을 방해하지 않는다.
- VM이 격리되므로 새로운 애플리케이션을 테스트하거나 프로덕션 환경을 설정할 수 있다는 장점이 있으며, 특정 프로세스를 지원하기 위해 단일 목적의 VM을 실행할 수도 있다.

### VM과 클라우드와의 관계

가상화는 클라우드 컴퓨팅을 가능하게 하는 기술 중 하나이다. 

퍼블릭 클라우드와 프라이빗 클라우드는 리소스를 공유 풀로 가상화하고, 관리 제어 계층을 추가하고, 자동화된 셀프 서비스 기능을 통해 해당 리소스를 제공한다.

클라우드를 구성하는 가상화, 관리, 자동화 소프트웨어는 모두 물리적 리소스, 가상 데이터 풀, 관리 소프트웨어, 자동화 스크립트, 고객을 서로 연결하는 운영 체제를 기반으로 한다.

### 실질적인 비교

가상화를 구현하면 1개의 리소스를 많은 리소스처럼 동작하도록 할 수 있고, 클라우드 컴퓨팅을 구현하면 서로 다른 부서에서 프라이빗 클라우드를 통해 또는 회사에서 퍼블릭 클라우드를 통해 자동 프로비저닝된 리소스의 단일 풀에 액세스할 수 있습니다.

**가상화**

가상화는 단일한 물리 하드웨어 시스템에서 여러 시뮬레이션 환경이나 전용 리소스를 생성할 수 있는 기술입니다. 하이퍼바이저라 불리는 소프트웨어가 하드웨어에 직접 연결되며 1개의 시스템을 VM이라는 별도의 고유하고 안전한 환경으로 분할할 수 있습니다. 이러한 VM은 하이퍼바이저의 기능을 사용하여 머신의 리소스를 하드웨어에서 분리한 후 적절하게 배포합니다.

**클라우드 컴퓨팅**

클라우드 컴퓨팅은 네트워크 전체에서 컴퓨팅, 네트워크, 스토리지 인프라 리소스, 서비스, 플랫폼, 애플리케이션을 사용자에게 온디맨드로 제공하는 원칙이자 접근 방식입니다. 이러한 인프라 리소스, 서비스, 애플리케이션은 클라우드, 즉 관리와 자동화 소프트웨어를 통해 오케스트레이션되는 가상 리소스 풀에서 소싱되므로 사용자는 자동 스케일링과 동적 리소스 할당이 지원되는 셀프 서비스 포털을 통해 온디맨드로 클라우드에 액세스할 수 있습니다.

|  | 가상화 | 클라우드 |
| --- | --- | --- |
| 정의 | 기술 | 방법 |
| 목적 | 1개의 물리적 하드웨어 시스템에서 다수의 시뮬레이션 환경 생성 | 온디맨드 사용을 위한 가상 리소스 풀링과 자동화 |
| 용도 | 특정 용도의 패키징된 리소스를 특정 사용자에게 제공 | 다양한 용도의 다양한 리소스를 사용자 그룹에 제공 |
| 설정 | 이미지 기반 | 템플릿 기반 |
| 평균 수명 | 연 단위(장기) | 시간/월 단위(단기) |
| 비용 | 높은 CAPEX(자본 지출), 낮은 OPEX(운영 비용) | 프라이빗 클라우드: 높은 CAPEX, 낮은 OPEX 퍼블릭 클라우드: 낮은 CAPEX, 높은 OPEX |
| 확장성 | 스케일 업 | 스케일 아웃 |
| 워크로드 | 스테이트풀(Stateful) | 스테이트리스(Stateless) |
| 테넌시 | 싱글 테넌트 | 멀티플 테넌트 |